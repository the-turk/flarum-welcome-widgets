{"version":3,"sources":["webpack://@the-turk/flarum-welcome-widgets/webpack/bootstrap","webpack://@the-turk/flarum-welcome-widgets/./forum.js","webpack://@the-turk/flarum-welcome-widgets/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@the-turk/flarum-welcome-widgets/./src/forum/components/UserDropdown.js","webpack://@the-turk/flarum-welcome-widgets/./src/forum/index.js","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['Model']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['app']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['components/AvatarEditor']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['components/Dropdown']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['components/IndexPage']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['components/SessionDropdown']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['extend']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['helpers/icon']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['helpers/listItems']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['models/User']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['utils/extractText']\"","webpack://@the-turk/flarum-welcome-widgets/external \"flarum.core.compat['utils/formatNumber']\""],"names":["UserDropdown","initProps","props","icon","className","buttonClassName","view","children","SessionDropdown","prototype","items","toArray","Dropdown","localePrefix","app","initializers","add","User","ww_lastLoginDiscussionsCount","Model","attribute","ww_lastLoginPostsCount","ww_lastLoginUsersCount","ww_previousLoginAt","getGreetingTime","currentTime","user","localeKey","username_obj","username","route","isValid","splitAfternoon","splitEvening","currentHour","parseFloat","format","translator","trans","getChangeInfo","currentCount","previousCount","keyword","percentage","toFixed","iconHelper","badgeClass","extend","IndexPage","vdom","session","changeInfo","currentStats","discussions","forum","posts","users","previousStats","container","find","e","attrs","includes","unshift","moment","component","AvatarEditor","listItems","badges","formatNumber","commentCount","discussionCount","map","type","span","extractText","humanTime","date"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Dropdown from 'flarum/components/Dropdown';\r\nimport SessionDropdown from 'flarum/components/SessionDropdown';\r\n\r\n/**\r\n * The `UserDropdown` component shows a dropdown of session controls.\r\n */\r\nexport default class UserDropdown extends Dropdown {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.icon = 'fas fa-ellipsis-v';\r\n    props.className = 'IndexPage-stats-dropdown';\r\n    props.buttonClassName = 'Button Button--icon Button--flat';\r\n  }\r\n\r\n  view() {\r\n    this.props.children = SessionDropdown.prototype.items().toArray();\r\n\r\n    return super.view();\r\n  }\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport listItems from 'flarum/helpers/listItems';\r\nimport iconHelper from 'flarum/helpers/icon';\r\nimport formatNumber from 'flarum/utils/formatNumber';\r\nimport UserDropdown from './components/UserDropdown';\r\nimport User from 'flarum/models/User';\r\nimport Model from 'flarum/Model';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport extractText from 'flarum/utils/extractText';\r\nimport AvatarEditor from 'flarum/components/AvatarEditor';\r\n\r\nconst localePrefix = 'the-turk-welcome-widgets.forum.';\r\n\r\napp.initializers.add('the-turk-welcome-widgets', () => {\r\n\tUser.prototype.ww_lastLoginDiscussionsCount = Model.attribute('ww_lastLoginDiscussionsCount');\r\n\tUser.prototype.ww_lastLoginPostsCount = Model.attribute('ww_lastLoginPostsCount');\r\n\tUser.prototype.ww_lastLoginUsersCount = Model.attribute('ww_lastLoginUsersCount');\r\n\tUser.prototype.ww_previousLoginAt = Model.attribute('ww_previousLoginAt');\r\n\r\n\tvar getGreetingTime = (currentTime, user) => {\r\n\t\tlet localeKey = 'welcome';\r\n\t\tconst username_obj = { username: <a href={app.route.user(user)}>{user.username()}</a>};\r\n\r\n\t\tif (!(!currentTime || !currentTime.isValid())) {\r\n\t\t\tconst splitAfternoon = 12; const splitEvening = 17;\r\n\t\t\tconst currentHour = parseFloat(currentTime.format('HH'));\r\n\r\n\t\t\tif (currentHour >= splitAfternoon && currentHour < splitEvening) {\r\n\t\t\t  localeKey = 'goodAfternoon';\r\n\t\t\t} else if (currentHour >= splitEvening) {\r\n\t\t\t  localeKey = 'goodEvening';\r\n\t\t\t}\r\n\r\n\t\t\tlocaleKey = 'goodMorning';\r\n\t\t}\r\n\r\n\t\treturn app.translator.trans(localePrefix + localeKey, username_obj);\r\n\t}\r\n\r\n\tvar getChangeInfo = (currentCount, previousCount) => {\r\n\t\tlet keyword, icon, percentage;\r\n\r\n\t\tif (previousCount == 0) {\r\n\t\t\tpercentage = 0;\r\n\t\t} else {\r\n\t\t\tpercentage = (((currentCount - previousCount) / previousCount) * 100);\r\n\t\t}\r\n\r\n\t\tif (percentage > 0) {\r\n\t\t\tkeyword = 'up'; icon = 'fas fa-chevron-up';\r\n\t\t} else if (percentage < 0) {\r\n\t\t\tpercentage = percentage * -1;\r\n\t\t\tkeyword = 'down'; icon = 'fas fa-chevron-down';\r\n\t\t} else {\r\n\t\t\tkeyword = 'neutral'; icon = 'fas fa-minus';\r\n\t\t}\r\n\r\n\t\tpercentage = percentage.toFixed(1) + '%';\r\n\t\ticon = iconHelper(icon + ' stats-' + keyword);\r\n\t\tconst badgeClass = 'stats-badge stats-' + keyword + ' stats-badge--' + keyword;\r\n\r\n\t\treturn { percentage: percentage, icon: icon, badgeClass: badgeClass };\r\n\t}\r\n\r\n\textend(IndexPage.prototype, 'view', function(vdom) {\r\n\t\tconst user = app.session.user;\r\n\r\n\t\tif (!user || !user.ww_previousLoginAt()) return;\r\n\r\n\t\tlet currentCount, changeInfo, icon;\r\n\t\tconst currentStats = {\r\n\t\t\tdiscussions: app.forum.attribute('ww_discussionsCount'),\r\n\t\t\tposts: app.forum.attribute('ww_postsCount'),\r\n\t\t\tusers: app.forum.attribute('ww_usersCount')\r\n\t\t};\r\n\t\tconst previousStats = {\r\n\t\t\tdiscussions: user.ww_lastLoginDiscussionsCount(),\r\n\t\t\tposts: user.ww_lastLoginPostsCount(),\r\n\t\t\tusers: user.ww_lastLoginUsersCount()\r\n\t\t}\r\n\t\tconst container = vdom.children.find(\r\n\t\t\te => e.attrs && e.attrs.className && e.attrs.className.includes('container')\r\n\t\t);\r\n\r\n\t\tcontainer.children.unshift(\r\n\t\t\t<div className=\"IndexPage-stats\">\r\n\t\t\t\t{ /* User's Panel */ }\r\n\t\t\t\t<div className=\"IndexPage-stats-general\">\r\n\t\t\t\t\t<div className=\"IndexPage-stats-header\">\r\n\t\t\t\t\t\t<h4 className=\"stats-greeting\">{getGreetingTime(moment(), user)}</h4>\r\n\t\t\t\t\t\t{UserDropdown.component()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"IndexPage-stats-body\">\r\n\t\t\t\t\t\t<div className=\"Avatar-container\">\r\n\t\t\t\t\t\t\t{AvatarEditor.component({ user })}\r\n\t\t\t\t\t\t\t<ul className=\"badges\">{listItems(user.badges().toArray())}</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"IndexPage-stats-personal\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h3>{formatNumber(user.commentCount())}</h3>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<a href={app.route('user.posts', { username: user.username() })}>\r\n\t\t\t\t\t\t\t\t\t\t{app.translator.trans(localePrefix + 'posts')}\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<h3>{formatNumber(user.discussionCount())}</h3>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<a href={app.route('user.discussions', { username: user.username() })}>\r\n\t\t\t\t\t\t\t\t\t\t{app.translator.trans(localePrefix + 'discussions')}\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{ /* Posts, Discussions & Users Stats */ }\r\n\t\t\t\t{['discussions', 'posts', 'users'].map((type) => {\r\n\t\t\t\t\tswitch(type) {\r\n\t\t\t\t\t\tcase 'discussions':\r\n\t\t\t\t\t\t\tcurrentCount = currentStats.discussions;\r\n\t\t\t\t\t\t\tchangeInfo = getChangeInfo(currentCount, previousStats.discussions);\r\n\t\t\t\t\t\t\ticon = 'fas fa-bars';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'posts':\r\n\t\t\t\t\t\t\tcurrentCount = currentStats.posts;\r\n\t\t\t\t\t\t\tchangeInfo = getChangeInfo(currentCount, previousStats.posts);\r\n\t\t\t\t\t\t\ticon = 'far fa-comment';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'users':\r\n\t\t\t\t\t\t\tcurrentCount = currentStats.users;\r\n\t\t\t\t\t\t\tchangeInfo = getChangeInfo(currentCount, previousStats.users);\r\n\t\t\t\t\t\t\ticon = 'far fa-user';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={'IndexPage-stats-' + type}>\r\n\t\t\t\t\t\t\t<div className=\"IndexPage-stats-header\">\r\n\t\t\t\t\t\t\t\t<div className=\"IndexPage-stats-icon\">\r\n\t\t\t\t\t\t\t\t\t{iconHelper(icon)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<h4>{app.translator.trans(localePrefix + type)}</h4>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"IndexPage-stats-body\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\t\t\t\t{[formatNumber(currentCount), changeInfo.icon]}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<span className={changeInfo.badgeClass}>\r\n\t\t\t\t\t\t\t\t\t\t\t{changeInfo.percentage}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"stats-since\">\r\n\t\t\t\t\t\t\t\t\t\t\t{app.translator.trans(localePrefix + 'sinceLastVisit', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tspan: <span title={extractText(humanTime(user.ww_previousLoginAt().date))} className=\"stats-since--text\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t});\r\n});\r\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/AvatarEditor'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/SessionDropdown'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/formatNumber'];"],"sourceRoot":""}